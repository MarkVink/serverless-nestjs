service: serverless-nestjs

plugins:
  - serverless-offline
  - serverless-dotenv-plugin
  - serverless-plugin-warmup
provider:
  name: aws
  runtime: nodejs18.x
  region: us-east-1

functions:
  index:
    handler: dist/src/index.handler
    events:
    - http:
        cors: true
        path: '/'
        method: any
    - http:
        cors: true
        path: '{proxy+}'
        method: any

custom:
  # Enable warmup on all functions (only for production and staging)
  warmup:
    - production
    - staging

# only include the Prisma binary required on AWS Lambda while packaging
package:
  patterns:
    - '!node_modules/.prisma/client/libquery_engine-*'
    - 'node_modules/.prisma/client/libquery_engine-rhel-*'
    - '!node_modules/prisma/libquery_engine-*'
    - '!node_modules/@prisma/engines/**'